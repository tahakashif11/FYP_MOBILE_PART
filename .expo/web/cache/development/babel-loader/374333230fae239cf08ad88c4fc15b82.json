{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _excluded = [\"containerStyle\", \"onMessageLayout\"],\n  _excluded2 = [\"containerStyle\", \"onMessageLayout\"],\n  _excluded3 = [\"containerStyle\", \"onMessageLayout\"],\n  _excluded4 = [\"containerStyle\", \"onMessageLayout\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Avatar } from \"./Avatar\";\nimport Bubble from \"./Bubble\";\nimport { SystemMessage } from \"./SystemMessage\";\nimport { Day } from \"./Day\";\nimport { StylePropType, isSameUser } from \"./utils\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = {\n  left: StyleSheet.create({\n    container: {\n      flexDirection: 'row',\n      alignItems: 'flex-end',\n      justifyContent: 'flex-start',\n      marginLeft: 8,\n      marginRight: 0\n    }\n  }),\n  right: StyleSheet.create({\n    container: {\n      flexDirection: 'row',\n      alignItems: 'flex-end',\n      justifyContent: 'flex-end',\n      marginLeft: 0,\n      marginRight: 8\n    }\n  })\n};\nvar Message = function (_React$Component) {\n  _inherits(Message, _React$Component);\n  var _super = _createSuper(Message);\n  function Message() {\n    _classCallCheck(this, Message);\n    return _super.apply(this, arguments);\n  }\n  _createClass(Message, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var next = nextProps.currentMessage;\n      var current = this.props.currentMessage;\n      var _this$props = this.props,\n        previousMessage = _this$props.previousMessage,\n        nextMessage = _this$props.nextMessage;\n      var nextPropsMessage = nextProps.nextMessage;\n      var nextPropsPreviousMessage = nextProps.previousMessage;\n      var shouldUpdate = this.props.shouldUpdateMessage && this.props.shouldUpdateMessage(this.props, nextProps) || false;\n      return next.sent !== current.sent || next.received !== current.received || next.pending !== current.pending || next.createdAt !== current.createdAt || next.text !== current.text || next.image !== current.image || next.video !== current.video || next.audio !== current.audio || previousMessage !== nextPropsPreviousMessage || nextMessage !== nextPropsMessage || shouldUpdate;\n    }\n  }, {\n    key: \"renderDay\",\n    value: function renderDay() {\n      if (this.props.currentMessage && this.props.currentMessage.createdAt) {\n        var _this$props2 = this.props,\n          containerStyle = _this$props2.containerStyle,\n          onMessageLayout = _this$props2.onMessageLayout,\n          props = _objectWithoutProperties(_this$props2, _excluded);\n        if (this.props.renderDay) {\n          return this.props.renderDay(props);\n        }\n        return _jsx(Day, _objectSpread({}, props));\n      }\n      return null;\n    }\n  }, {\n    key: \"renderBubble\",\n    value: function renderBubble() {\n      var _this$props3 = this.props,\n        containerStyle = _this$props3.containerStyle,\n        onMessageLayout = _this$props3.onMessageLayout,\n        props = _objectWithoutProperties(_this$props3, _excluded2);\n      if (this.props.renderBubble) {\n        return this.props.renderBubble(props);\n      }\n      return _jsx(Bubble, _objectSpread({}, props));\n    }\n  }, {\n    key: \"renderSystemMessage\",\n    value: function renderSystemMessage() {\n      var _this$props4 = this.props,\n        containerStyle = _this$props4.containerStyle,\n        onMessageLayout = _this$props4.onMessageLayout,\n        props = _objectWithoutProperties(_this$props4, _excluded3);\n      if (this.props.renderSystemMessage) {\n        return this.props.renderSystemMessage(props);\n      }\n      return _jsx(SystemMessage, _objectSpread({}, props));\n    }\n  }, {\n    key: \"renderAvatar\",\n    value: function renderAvatar() {\n      var _this$props5 = this.props,\n        user = _this$props5.user,\n        currentMessage = _this$props5.currentMessage,\n        showUserAvatar = _this$props5.showUserAvatar;\n      if (user && user._id && currentMessage && currentMessage.user && user._id === currentMessage.user._id && !showUserAvatar) {\n        return null;\n      }\n      if (currentMessage && currentMessage.user && currentMessage.user.avatar === null) {\n        return null;\n      }\n      var _this$props6 = this.props,\n        containerStyle = _this$props6.containerStyle,\n        onMessageLayout = _this$props6.onMessageLayout,\n        props = _objectWithoutProperties(_this$props6, _excluded4);\n      return _jsx(Avatar, _objectSpread({}, props));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props7 = this.props,\n        currentMessage = _this$props7.currentMessage,\n        onMessageLayout = _this$props7.onMessageLayout,\n        nextMessage = _this$props7.nextMessage,\n        position = _this$props7.position,\n        containerStyle = _this$props7.containerStyle;\n      if (currentMessage) {\n        var sameUser = isSameUser(currentMessage, nextMessage);\n        return _jsxs(View, {\n          onLayout: onMessageLayout,\n          children: [this.renderDay(), currentMessage.system ? this.renderSystemMessage() : _jsxs(View, {\n            style: [styles[position].container, {\n              marginBottom: sameUser ? 2 : 10\n            }, !this.props.inverted && {\n              marginBottom: 2\n            }, containerStyle && containerStyle[position]],\n            children: [this.props.position === 'left' ? this.renderAvatar() : null, this.renderBubble(), this.props.position === 'right' ? this.renderAvatar() : null]\n          })]\n        });\n      }\n      return null;\n    }\n  }]);\n  return Message;\n}(React.Component);\nexport { Message as default };\nMessage.defaultProps = {\n  renderAvatar: undefined,\n  renderBubble: null,\n  renderDay: null,\n  renderSystemMessage: null,\n  position: 'left',\n  currentMessage: {},\n  nextMessage: {},\n  previousMessage: {},\n  user: {},\n  containerStyle: {},\n  showUserAvatar: false,\n  inverted: true,\n  shouldUpdateMessage: undefined,\n  onMessageLayout: undefined\n};\nMessage.propTypes = {\n  renderAvatar: PropTypes.func,\n  showUserAvatar: PropTypes.bool,\n  renderBubble: PropTypes.func,\n  renderDay: PropTypes.func,\n  renderSystemMessage: PropTypes.func,\n  position: PropTypes.oneOf(['left', 'right']),\n  currentMessage: PropTypes.object,\n  nextMessage: PropTypes.object,\n  previousMessage: PropTypes.object,\n  user: PropTypes.object,\n  inverted: PropTypes.bool,\n  containerStyle: PropTypes.shape({\n    left: StylePropType,\n    right: StylePropType\n  }),\n  shouldUpdateMessage: PropTypes.func,\n  onMessageLayout: PropTypes.func\n};","map":{"version":3,"mappings":"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","names":["PropTypes","React","Avatar","Bubble","SystemMessage","Day","StylePropType","isSameUser","styles","left","StyleSheet","create","container","flexDirection","alignItems","justifyContent","marginLeft","marginRight","right","Message","nextProps","next","currentMessage","current","props","previousMessage","nextMessage","nextPropsMessage","nextPropsPreviousMessage","shouldUpdate","shouldUpdateMessage","sent","received","pending","createdAt","text","image","video","audio","containerStyle","onMessageLayout","renderDay","renderBubble","renderSystemMessage","user","showUserAvatar","_id","avatar","position","sameUser","system","marginBottom","inverted","renderAvatar","Component","undefined","func","bool","oneOf","object","shape"],"sourceRoot":"","sources":["../src/Message.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}